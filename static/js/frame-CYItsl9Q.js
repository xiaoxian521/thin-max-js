import{_ as g,q as c,p as I,u,L as R,A as b,i as k,w as x,c as S,o as T,d as L,$ as P}from"./index-1KWQvHXL.js";const $={class:"frame","element-loading-text":"加载中..."},j=["src"],B=Object.assign({name:"LayFrame"},{__name:"frame",props:{frameInfo:Object},setup(h){var v,_;const t=h,r=c(!0),n=I(),f=c(""),m=c(null),o=c(null);(v=u(n.meta))!=null&&v.frameSrc&&(f.value=(_=u(n.meta))==null?void 0:_.frameSrc);function d(){o.value!==null&&(clearTimeout(o.value),o.value=null)}function s(){r.value=!1,d()}function p(){P(()=>{const e=u(m);if(!e)return;const a=e;a.attachEvent?a.attachEvent("onload",s):e.onload=s})}let i=!1;return R(()=>n.fullPath,e=>{var a,l;if(n.name==="Redirect"&&((a=t.frameInfo)!=null&&a.fullPath)&&e.includes(t.frameInfo.fullPath)){i=!0,r.value=!0;return}if(((l=t.frameInfo)==null?void 0:l.fullPath)===e&&i){r.value=!0,d();const w=new URL(t.frameInfo.frameSrc,window.location.origin).search?"&":"?";f.value=`${t.frameInfo.frameSrc}${w}t=${Date.now()}`,o.value=window.setTimeout(()=>{r.value&&s()},1500),i=!1}},{immediate:!0}),b(()=>{p()}),(e,a)=>{const l=k("loading");return x((T(),S("div",$,[L("iframe",{ref_key:"frameRef",ref:m,src:f.value,class:"frame-iframe"},null,8,j)])),[[l,r.value]])}}}),y=g(B,[["__scopeId","data-v-59fb0eb3"]]);export{y as default};
